# schet_go

`schet_go` — это проект, чтобы **не мучаться с ручной записью расходов и доходов в строгой структуре**.
Идея простая: вы пишете обычным текстом, на что потратили или что получили, а бот сам выделяет нужную информацию (тип операции, сумму, валюту, дату и т.д.).

В будущем планируется добавить **голосовые сообщения и фото**, чтобы пользоваться было ещё удобнее.

## Для чего этот проект

Обычно учёт финансов неудобный:
- нужно открывать таблицу/приложение,
- заполнять поля вручную,
- следить за форматом.

Здесь подход другой:
- пишете как человеку: `потратил 500 рублей на такси вчера`,
- система сама разбирает текст,
- возвращает структурированные данные, которые можно дальше сохранять и анализировать.

## Текущая стадия проекта

Сейчас проект на базовой стадии:
- принимает **только текст** из Telegram,
- отправляет текст в LLM,
- выделяет нужные финансовые данные в JSON.

То есть на данный момент основной фокус — корректное извлечение данных именно из текста.

## Как запустить проект

### 1) Что нужно заранее

- Rust (stable)
- Telegram bot token (через BotFather)
- Запущенный LLM-сервис с HTTP API (`/chat`)
- Публичный HTTPS URL для Telegram webhook

### 2) Настройка `.env`

Создайте в корне проекта файл `.env`:

```env
BOT_TOKEN=ваш_telegram_bot_token
WEBHOOK_URL=https://ваш-домен/webhook
LLM_URL=http://localhost:11434
```

Расшифровка:
- `BOT_TOKEN` — токен вашего Telegram-бота.
- `WEBHOOK_URL` — публичный адрес webhook (должен указывать на `/webhook` вашего сервиса).
- `LLM_URL` — адрес LLM-сервиса (в коде вызывается `POST {LLM_URL}/chat`).

### 3) Поднять LLM

Убедитесь, что ваш LLM доступен по `LLM_URL` и принимает запросы на `/chat`.

Пример проверки:

```bash
curl http://localhost:11434
```

(Если у вас другой адрес/порт — используйте его в `LLM_URL`.)

### 4) Запуск приложения

```bash
cargo run
```

После запуска сервис:
- выставляет Telegram webhook,
- стартует HTTP-сервер на `0.0.0.0:3000`,
- принимает Telegram updates на `/webhook`.

## Как это работает сейчас (кратко)

1. Пользователь пишет сообщение в Telegram.
2. Бот получает update через webhook.
3. Текст отправляется в LLM с инструкцией распарсить финансовую операцию.
4. Ответ LLM преобразуется в JSON-структуру.
5. Бот отправляет результат обратно в чат.

## Структура проекта

- `src/main.rs` — запуск сервера и обработка `/webhook`.
- `src/tg_bot.rs` — интеграция с Telegram Bot API.
- `src/llm.rs` — запрос к LLM и парсинг JSON-ответа.
